<form [formGroup]="_form" [sbFormControlFirstError]="_form" class="form">

    <div class="block" tabindex="0" >
        <div class="form-row inline">
            <div class="q">Q{{_form.controls.questionId.value}}</div>
            <mpt-question-type-menu id="questionType" formControlName="questionType" [items]="_questionTypeMenuItems" />
            <sb-first-error [control]="_form.controls.questionType" />
        </div>

        <div class="form-row">
            <label class="label" for="questionText">Question</label>
            <input id="questionText" type="text" formControlName="questionText" class="control input" placeholder="Enter the question text" />
            <sb-first-error [control]="_form.controls.questionText" />
        </div>
        

        <ng-container formArrayName="options">
            <!-- Don't use getter -->
            @for (answerControl of _form.controls.options.controls; track $index;let idx = $index) {
            <div class="form-row inline option-row" [attr.data-testid]="'option-row-' + idx">
                <span>- </span><input class="control input option" [formControlName]="idx" placeholder="Question {{ idx + 1 }}" [attr.data-testid]="'option-input-' + idx" />
                <mpt-ui-icon-button [id]="'btn-delete-option' + idx" (click)="deleteAnswerOption(idx)" [iconName]="'close'" [attr.data-testid]="'btn-delete-option-' + idx" />
            </div>
            }
        </ng-container>


        <div class="footer">
            <mpt-ui-text-button id="btn-add-option" (click)="addAnswerOption()">Add Option</mpt-ui-text-button>
            <div class="checkboxes">

                <div class="form-row inline">
                    <label class="label" for="mandatoryInd">Make Required</label>
                    <!-- <input id="mandatoryInd" type="checkbox" formControlName="mandatoryInd" class="control checkbox" /> -->
                    <mpt-ui-switch id="mandatoryInd" type="checkbox" formControlName="mandatoryInd" class="checkbox" />
                    <sb-first-error [control]="_form.controls.mandatoryInd" />
                </div>

                <div class="form-row inline">
                    <label class="label" for="randomizeOptions">Randomize Options</label>
                    <!-- <input id="randomizeOptions" type="checkbox" formControlName="randomizeOptions" class="control checkbox" /> -->
                    <mpt-ui-switch id="randomizeOptions" type="checkbox" formControlName="randomizeOptions" class="checkbox" />
                    <sb-first-error [control]="_form.controls.randomizeOptions" />
                </div>
            </div>
        </div>
    </div>
</form>